{% extends "squelette.html" %}
{% block title %}Ressources{% endblock %}
{% block content %}
<h1>Recherche de ressources</h1>

<h2>Par thématique</h2>
<form action={% url "recherche" %} method="post">
    {% csrf_token %}
    {{ form.as_table }}
    <input type="submit" name="RechercheParCategorie" value="Rechercher" />
</form>

<h2>Par oral</h2>
<form action={% url "recherche" %} method="post">
    {% csrf_token %}
    {{ form2.as_table }}
    <input type="hidden" name="Recherche" value="ParOral"/>
    <input type="submit" name="RechercheParOral" value="Rechercher" />
</form>


{% if show_result %}
    aumoinsunresultat = {{aumoinsunresultat}}<br />
    show_resultat = {{show_result}}<br />
    oral = {{oral}}<br />
    filtres_definis = {{filtres_definis}}<br />
    fitlres_mots-cles = {{filtres.mot_cle}}<br />
    
    <hr>
    <h1>Résultats</h1>
    
    <article class='center'>
    
    {% if not aumoinsunresultat %}
    <h4>Aucun résultat !
    {% else %}
    
    
    <table id="table_resultats_recherche">
      <tr>
       <th>Ressource</th><th>Discipline</th><th>Catégorie</th><th>Sous-catégorie</th><th>Oraux</th>
      </tr>
    
    {% for ressource in liste_liens %}
        <tr>
         <td><a href="{{ ressource.contenu }}">{{ressource.description}}</a></td>
         <td>{{ressource.discipline}}</td>
         <td>{{ressource.categorie}}</td>
         <td>{{ressource.sous_cat}}</td>
         <td>{% for oral in ressource.oral.all %} {{oral.agreg}} - {{oral.type_oral}} - {{oral.numero}} : {{oral.nom}} <br /> {% endfor %}</td>
    {% endfor %}
    
    {% for ressource in liste_images %}
        <tr>
         <td><a href="{{ ressource.contenu.url }}"><img src="{{ ressource.contenu.url }}" height='200px' /></a></td>
         <td>{{ressource.discipline}}</td>
         <td>{{ressource.categorie}}</td>
         <td>{{ressource.sous_cat}}</td>
         <td>{% for oral in ressource.oral.all %} {{oral.agreg}} - {{oral.type_oral}} - {{oral.numero}} : {{oral.nom}} <br /> {% endfor %}</td>
    {% endfor %}

    </table>
    </article>
    {% endif %}


{% endif %}


{% endblock %}